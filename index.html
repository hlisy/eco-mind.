<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Eco Psychology Action Page</title>
<style>
  body {
    margin: 0;
    font-family: 'Pretendard', sans-serif;
    background: linear-gradient(120deg, #f4f9f4, #f3f7ff, #fff9f4);
  }

  section {
    padding: 80px 20px;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  h1, h2 {
    color: #2d4235;
  }

  /* ì…ë ¥ & ë²„íŠ¼ */
  #practiceInput {
    width: 80%;
    max-width: 400px;
    padding: 15px;
    border-radius: 14px;
    border: 1px solid #9fc7a1;
    margin-top: 20px;
    font-size: 16px;
  }

  #addBtn {
    margin-top: 10px;
    padding: 13px 25px;
    background: #9bd48a;
    border: none;
    border-radius: 12px;
    color: #193421;
    cursor: pointer;
    font-size: 17px;
    font-weight: bold;
  }
  #addBtn:hover {
    background: #8acb78;
  }

  /* ë±ƒì§€ ì˜ì—­ */
  #badgeDisplay {
    margin-top: 40px;
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
  }

  .badge {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: #c8f3c3;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    box-shadow: 0 5px 12px rgba(0,0,0,0.1);
    transition: transform 0.3s;
  }
  .badge:hover {
    transform: scale(1.07);
  }
  .badge-icon {
    font-size: 40px;
    margin-bottom: 5px;
  }

  /* íƒ„ì†ŒëŸ‰ ê³„ì‚° ë°•ìŠ¤ */
  .calculator-box {
    background: white;
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    width: 90%;
    max-width: 500px;
  }

  #carbonResult {
    margin-top: 15px;
    font-size: 18px;
    color: #2e4a35;
    font-weight: bold;
  }

  /* ê·¸ë˜í”„ ì˜ì—­ */
  #ecoChart {
    margin-top: 30px;
    width: 90%;
    max-width: 600px;
  }

  /* ìŠ¤í† ë¦¬ ë°•ìŠ¤ */
  .story-box {
    background: white;
    padding: 40px;
    border-radius: 18px;
    max-width: 800px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.12);
    line-height: 1.7;
    font-size: 18px;
    color: #38493a;
  }
</style>
</head>
<body>

<!-- SECTION 1: Intro -->
<section>
  <h1>ğŸŒ¿ ì‹¬ë¦¬í•™ ê¸°ë°˜ Eco ì‹¤ì²œ í”Œë«í¼</h1>
  <p>ë‹¹ì‹ ì˜ ì‘ì€ ë³€í™”ê°€ ê¸°í›„Â·í™˜ê²½ì— ë¯¸ì¹˜ëŠ” ì‹¬ë¦¬ì Â·ìƒíƒœì  íš¨ê³¼ë¥¼ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•˜ì„¸ìš”.</p>
</section>

<!-- SECTION 2: ì‹¤ì²œ ê¸°ë¡ + ë±ƒì§€ -->
<section>
  <h2>âœ¨ ì˜¤ëŠ˜ì˜ ì‹¤ì²œì„ ê¸°ë¡í•˜ì„¸ìš”</h2>
  <input id="practiceInput" type="text" placeholder="ì˜ˆ: í…€ë¸”ëŸ¬ ì‚¬ìš© / í”Œë¼ìŠ¤í‹± ì¤„ì´ê¸° / ì „ê¸° ì ˆì•½ ë“±">
  <button id="addBtn" onclick="createBadge()">ë±ƒì§€ ìƒì„±í•˜ê¸°</button>

  <div id="badgeDisplay"></div>
</section>

<!-- SECTION 3: íƒ„ì†ŒëŸ‰ ê³„ì‚°ê¸° -->
<section>
  <h2>ğŸŒ ì ˆì•½í•œ íƒ„ì†ŒëŸ‰ ê³„ì‚°í•˜ê¸°</h2>
  <div class="calculator-box">
    <p>ì˜¤ëŠ˜ ì‹¤ì²œìœ¼ë¡œ ì ˆì•½í•œ COâ‚‚ ì–‘ì„ ê³„ì‚°í•´ë³´ì„¸ìš”. (ì˜ˆ: 0.2kg)</p>
    <input type="number" id="carbonInput" placeholder="ì ˆì•½í•œ íƒ„ì†ŒëŸ‰(kg)">
    <button id="addBtn" onclick="calcCarbon()">ê³„ì‚°</button>
    <div id="carbonResult"></div>
  </div>
</section>

<!-- SECTION 4: ëˆ„ì  ê¸°ì—¬ë„ ê·¸ë˜í”„ -->
<section>
  <h2>ğŸ“Š ë‚˜ì˜ ëˆ„ì  Eco ê¸°ì—¬ë„</h2>
  <canvas id="ecoChart"></canvas>
</section>

<!-- SECTION 5: ì§€ì—­ í™˜ê²½ ë³€í™” ìŠ¤í† ë¦¬ -->
<section>
  <h2>ğŸ“– ìš°ë¦¬ ì§€ì—­ì˜ í™˜ê²½ ë³€í™” ìŠ¤í† ë¦¬</h2>
  <div class="story-box">
    ìµœê·¼ ìš°ë¦¬ ì§€ì—­ì—ì„œëŠ” ë¯¸ì„¸ë¨¼ì§€ ë†ë„ê°€ ì§€ë‚œ 5ë…„ ì‚¬ì´ 17% ê°ì†Œí–ˆìŠµë‹ˆë‹¤.  
    ì´ëŠ” ì‹œë¯¼ë“¤ì˜ ìƒí™œ ì† ì‘ì€ ì‹¤ì²œì´ ëª¨ì—¬ ë§Œë“¤ì–´ë‚¸ ì§„ì§œ ë³€í™”ì…ë‹ˆë‹¤.  
    ì‹¬ë¦¬í•™ ì—°êµ¬ì—ì„œë„ â€œì‘ì€ ì„±ê³µ ê²½í—˜ì˜ ë°˜ë³µâ€ì´ ì§€ì†ì  í–‰ë™ì„ ê°•í™”í•œë‹¤ê³  ê°•ì¡°í•©ë‹ˆë‹¤.  
    ì—¬ëŸ¬ë¶„ì˜ ì‹¤ì²œì´ ì§€ì—­ ìƒíƒœì™€ ë§ˆìŒ ê±´ê°•ì„ í•¨ê»˜ ë°”ê¾¸ê³  ìˆìŠµë‹ˆë‹¤.
  </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
/* ---------------------- 1) ì‹¤ì²œ ë±ƒì§€ ìƒì„± ----------------------- */
function createBadge() {
  const text = document.getElementById("practiceInput").value.trim();
  if (!text) return alert("ì‹¤ì²œ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");

  let icon = "ğŸŒ±";
  if (text.includes("í”Œë¼ìŠ¤í‹±")) icon = "ğŸ§´";
  else if (text.includes("ì „ê¸°")) icon = "ğŸ’¡";
  else if (text.includes("êµí†µ")) icon = "ğŸšŒ";
  else if (text.includes("ë¬¼")) icon = "ğŸš°";
  else if (text.includes("í…€ë¸”ëŸ¬")) icon = "â˜•";
  else if (text.includes("ì¬í™œìš©")) icon = "â™»ï¸";

  const badge = document.createElement("div");
  badge.className = "badge";
  badge.innerHTML = `
      <div class="badge-icon">${icon}</div>
      <div>${text}</div>
  `;

  document.getElementById("badgeDisplay").appendChild(badge);
  document.getElementById("practiceInput").value = "";

  addGraphPoint();  // ê·¸ë˜í”„ ìˆ˜ì¹˜ ì¶”ê°€
}

/* ---------------------- 2) íƒ„ì†ŒëŸ‰ ê³„ì‚°ê¸° ----------------------- */
function calcCarbon() {
  const val = Number(document.getElementById("carbonInput").value);
  if (!val) return alert("ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");
  document.getElementById("carbonResult").innerText = `ì˜¤ëŠ˜ ì ˆì•½í•œ COâ‚‚: ${val.toFixed(2)} kg`;

  addGraphPoint(val);
}

/* ---------------------- 3) ê·¸ë˜í”„ ----------------------- */
let dataPoints = [];
const ctx = document.getElementById("ecoChart");

const chart = new Chart(ctx, {
  type: "line",
  data: {
    labels: [],
    datasets: [{
      label: "ëˆ„ì  ê¸°ì—¬ë„(kg COâ‚‚)",
      data: dataPoints,
      borderWidth: 3
    }]
  },
  options: {
    responsive: true
  }
});

function addGraphPoint(value = 0.1) {
  chart.data.labels.push(`${chart.data.labels.length + 1}ì¼`);
  dataPoints.push((dataPoints.at(-1) || 0) + value);
  chart.update();
}
</script>

</body>
</html>
